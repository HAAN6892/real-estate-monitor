<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ  ë¶€ë™ì‚° ë§¤ìˆ˜ ëŒ€ì‹œë³´ë“œ</title>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700;900&family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
:root {
  --bg: #06060b;
  --surface: #0d0d14;
  --surface2: #13131e;
  --surface3: #1a1a28;
  --border: #232336;
  --border-hover: #3a3a55;
  --text: #eeeef5;
  --text-dim: #7a7a95;
  --text-mid: #a0a0b8;
  --accent: #7c6af6;
  --accent2: #9d8df7;
  --green: #34d399;
  --green-dim: rgba(52,211,153,0.12);
  --red: #f87171;
  --red-dim: rgba(248,113,113,0.12);
  --yellow: #fbbf24;
  --yellow-dim: rgba(251,191,36,0.12);
  --blue: #60a5fa;
  --blue-dim: rgba(96,165,250,0.12);
  --mono: 'JetBrains Mono', monospace;
}
* { margin:0; padding:0; box-sizing:border-box; }
body { font-family:'Noto Sans KR',sans-serif; background:var(--bg); color:var(--text); line-height:1.6; }

/* Layout */
.app { display:grid; grid-template-columns:320px 1fr; min-height:100vh; }

/* Sidebar */
.sidebar {
  background:var(--surface);
  border-right:1px solid var(--border);
  padding:28px 24px;
  overflow-y:auto;
  max-height:100vh;
  position:sticky;
  top:0;
}
.sidebar-logo { font-size:13px; font-weight:700; color:var(--accent); letter-spacing:2px; text-transform:uppercase; margin-bottom:6px; }
.sidebar-title { font-size:22px; font-weight:900; margin-bottom:24px; letter-spacing:-0.5px; }

.section-label {
  font-size:10px; font-weight:700; color:var(--text-dim);
  letter-spacing:1.5px; text-transform:uppercase;
  margin:24px 0 12px; padding-bottom:6px;
  border-bottom:1px solid var(--border);
}

.field { margin-bottom:16px; }
.field label { display:block; font-size:12px; color:var(--text-mid); margin-bottom:4px; font-weight:500; }
.field-row { display:flex; align-items:center; gap:8px; }
.field input[type="range"] {
  flex:1; -webkit-appearance:none; height:4px;
  background:var(--border); border-radius:2px; outline:none;
}
.field input[type="range"]::-webkit-slider-thumb {
  -webkit-appearance:none; width:16px; height:16px;
  border-radius:50%; background:var(--accent); cursor:pointer;
  box-shadow:0 0 8px rgba(124,106,246,0.4);
}
.field-value {
  font-family:var(--mono); font-size:14px; font-weight:600;
  width:72px; text-align:right; color:var(--text);
  background:var(--surface2); border:1px solid var(--border);
  border-radius:5px; padding:4px 8px; outline:none;
  -moz-appearance:textfield;
}
.field-value::-webkit-outer-spin-button,
.field-value::-webkit-inner-spin-button { -webkit-appearance:none; margin:0; }
.field-value:focus { border-color:var(--accent); background:var(--surface3); }
.field-unit { font-size:11px; color:var(--text-dim); }

.field select {
  width:100%; background:var(--surface2); border:1px solid var(--border);
  color:var(--text); padding:8px 12px; border-radius:6px; font-size:13px;
  font-family:'Noto Sans KR',sans-serif; cursor:pointer; outline:none;
}
.field select:focus { border-color:var(--accent); }

.toggle-row {
  display:flex; justify-content:space-between; align-items:center;
  padding:8px 0; font-size:13px;
}
.toggle {
  width:40px; height:22px; background:var(--border); border-radius:11px;
  position:relative; cursor:pointer; transition:background 0.2s;
}
.toggle.on { background:var(--accent); }
.toggle::after {
  content:''; position:absolute; top:3px; left:3px;
  width:16px; height:16px; border-radius:50%; background:white;
  transition:transform 0.2s;
}
.toggle.on::after { transform:translateX(18px); }

.divider { height:1px; background:var(--border); margin:20px 0; }

/* Main */
.main { padding:28px 32px; overflow-y:auto; }

/* Top Stats */
.stats-row { display:grid; grid-template-columns:repeat(4,1fr); gap:16px; margin-bottom:28px; }
.stat-card {
  background:var(--surface); border:1px solid var(--border);
  border-radius:10px; padding:18px 20px; transition:border-color 0.2s;
}
.stat-card:hover { border-color:var(--border-hover); }
.stat-label { font-size:11px; color:var(--text-dim); font-weight:500; letter-spacing:0.5px; margin-bottom:6px; }
.stat-value { font-family:var(--mono); font-size:26px; font-weight:700; letter-spacing:-1px; }
.stat-sub { font-size:11px; color:var(--text-dim); margin-top:4px; }
.stat-bar { height:3px; border-radius:2px; margin-top:10px; background:var(--border); overflow:hidden; }
.stat-bar-fill { height:100%; border-radius:2px; transition:width 0.4s ease; }

/* Sections */
.section { margin-bottom:32px; }
.section-header {
  display:flex; justify-content:space-between; align-items:center;
  margin-bottom:14px;
}
.section-title { font-size:16px; font-weight:700; display:flex; align-items:center; gap:8px; }
.section-badge { font-size:11px; background:var(--surface3); color:var(--text-dim); padding:2px 10px; border-radius:10px; }

/* Loan Breakdown */
.loan-grid { display:grid; grid-template-columns:1fr 1fr; gap:16px; }
.loan-card {
  background:var(--surface); border:1px solid var(--border);
  border-radius:10px; padding:20px; position:relative; overflow:hidden;
}
.loan-card::before {
  content:''; position:absolute; top:0; left:0; right:0; height:3px;
}
.loan-card.ok::before { background:var(--green); }
.loan-card.warn::before { background:var(--yellow); }
.loan-card.danger::before { background:var(--red); }
.loan-label { font-size:12px; color:var(--text-dim); margin-bottom:2px; }
.loan-big { font-family:var(--mono); font-size:28px; font-weight:700; margin-bottom:4px; }
.loan-detail { font-size:12px; color:var(--text-dim); line-height:1.7; }
.loan-detail span { color:var(--text-mid); }

/* Property Table */
.table-wrap {
  background:var(--surface); border:1px solid var(--border);
  border-radius:10px; overflow:hidden;
}
table { width:100%; border-collapse:collapse; font-size:13px; }
thead { background:var(--surface2); }
th { padding:10px 14px; text-align:left; font-weight:500; color:var(--text-dim); font-size:11px; letter-spacing:0.5px; }
td { padding:11px 14px; border-top:1px solid var(--border); }
tr:hover td { background:rgba(124,106,246,0.03); }
.mono { font-family:var(--mono); font-weight:600; }
.tag { display:inline-block; padding:2px 8px; border-radius:4px; font-size:11px; font-weight:500; }
.tag-ok { background:var(--green-dim); color:var(--green); }
.tag-warn { background:var(--yellow-dim); color:var(--yellow); }
.tag-danger { background:var(--red-dim); color:var(--red); }
.tag-region { background:var(--blue-dim); color:var(--blue); }
.tag-info { background:rgba(124,106,246,0.1); color:var(--accent2); }
.affordability { font-size:11px; font-weight:600; }
.afford-yes { color:var(--green); }
.afford-tight { color:var(--yellow); }
.afford-no { color:var(--red); }

/* Policy Timeline */
.timeline { display:flex; flex-direction:column; gap:10px; }
.tl-item {
  background:var(--surface); border:1px solid var(--border);
  border-radius:8px; padding:14px 16px; display:flex; gap:14px;
  align-items:flex-start; transition:border-color 0.2s;
}
.tl-item:hover { border-color:var(--border-hover); }
.tl-dot { width:8px; height:8px; border-radius:50%; margin-top:6px; flex-shrink:0; }
.tl-dot.high { background:var(--red); box-shadow:0 0 6px rgba(248,113,113,0.5); }
.tl-dot.mid { background:var(--yellow); }
.tl-dot.low { background:var(--green); }
.tl-date { font-family:var(--mono); font-size:11px; color:var(--text-dim); min-width:76px; padding-top:1px; }
.tl-body { flex:1; }
.tl-title { font-size:13px; font-weight:600; margin-bottom:2px; }
.tl-impact { font-size:12px; color:var(--text-dim); line-height:1.6; }
.tl-impact em { color:var(--yellow); font-style:normal; }

/* Policy Loan Grid */
.policy-grid { display:grid; grid-template-columns:repeat(2,1fr); gap:12px; }
.policy-card {
  background:var(--surface); border:1px solid var(--border);
  border-radius:10px; padding:16px 18px; position:relative;
  overflow:hidden; transition:border-color 0.2s;
}
.policy-card:hover { border-color:var(--border-hover); }
.policy-card::before {
  content:''; position:absolute; top:0; left:0; right:0; height:3px;
}
.policy-card.eligible::before { background:var(--green); }
.policy-card.ineligible::before { background:var(--red); }
.policy-card.conditional::before { background:var(--yellow); }
.policy-card.checking::before { background:var(--blue); }
.policy-name { font-size:14px; font-weight:700; margin-bottom:2px; display:flex; align-items:center; gap:8px; }
.policy-status { font-size:12px; font-weight:600; }
.policy-status.yes { color:var(--green); }
.policy-status.no { color:var(--red); }
.policy-status.maybe { color:var(--yellow); }
.policy-status.check { color:var(--blue); }
.policy-detail { font-size:12px; color:var(--text-dim); margin-top:6px; line-height:1.6; }
.policy-gap { font-family:var(--mono); font-size:11px; margin-top:6px; padding:4px 8px; border-radius:4px; display:inline-block; }
.policy-gap.over { background:var(--red-dim); color:var(--red); }
.policy-gap.close { background:var(--yellow-dim); color:var(--yellow); }
.policy-gap.under { background:var(--green-dim); color:var(--green); }

/* Condition Chips */
.condition-row { display:flex; flex-wrap:wrap; gap:8px; }
.cond-chip {
  background:var(--surface2); border:1px solid var(--border);
  padding:6px 14px; border-radius:20px; font-size:12px;
  color:var(--text-mid); white-space:nowrap;
}

/* Policy Reference Box */
.policy-ref {
  background:var(--surface2); border:1px solid var(--border);
  border-radius:8px; padding:10px 12px; margin-bottom:10px;
  font-size:11px;
}
.policy-ref-title { font-weight:600; font-size:10px; color:var(--text-mid); margin-bottom:5px; letter-spacing:0.5px; }
.policy-ref-row { display:flex; align-items:center; gap:6px; color:var(--text-dim); padding:1px 0; }
.ref-dot { width:6px; height:6px; border-radius:50%; flex-shrink:0; }
.field-hint { font-size:10px; color:var(--text-dim); font-weight:400; }

/* Footer */
.footer { text-align:center; padding:20px; font-size:11px; color:var(--text-dim); border-top:1px solid var(--border); }

@media(max-width:1024px) {
  .app { grid-template-columns:1fr; }
  .sidebar { position:relative; max-height:none; border-right:none; border-bottom:1px solid var(--border); }
  .stats-row { grid-template-columns:repeat(2,1fr); }
  .loan-grid { grid-template-columns:1fr; }
}
</style>
</head>
<body>
<div class="app">

<!-- ===== SIDEBAR ===== -->
<aside class="sidebar" id="sidebar">
  <div class="sidebar-logo">Real Estate</div>
  <div class="sidebar-title">ğŸ  ìš°ë¦¬ ì§‘ ì‚¬ê¸°</div>

  <div class="section-label">ğŸ‘« ê°€êµ¬ ì†Œë“</div>
  <div class="field">
    <label>ë³¸ì¸ ì—°ì†Œë“</label>
    <div class="field-row">
      <input type="range" id="income1" min="2000" max="10000" step="100" value="4740">
      <input type="number" class="field-value" id="income1Val" value="4740" min="0" max="99999">
      <span class="field-unit">ë§Œì›</span>
    </div>
  </div>
  <div class="field">
    <label>ë°°ìš°ì ì—°ì†Œë“</label>
    <div class="field-row">
      <input type="range" id="income2" min="2000" max="10000" step="100" value="4000">
      <input type="number" class="field-value" id="income2Val" value="4000" min="0" max="99999">
      <span class="field-unit">ë§Œì›</span>
    </div>
  </div>

  <div class="section-label">ğŸ’° ìê¸ˆ í˜„í™©</div>
  <div class="field">
    <label>ì´ ê°€ìš© ìê¸ˆ</label>
    <div class="field-row">
      <input type="range" id="cash" min="3000" max="30000" step="500" value="15000">
      <input type="number" class="field-value" id="cashVal" value="15000" min="0" max="999999">
      <span class="field-unit">ë§Œì›</span>
    </div>
  </div>
  <div class="field">
    <label>ì¸í…Œë¦¬ì–´ ì˜ˆì‚°</label>
    <div class="field-row">
      <input type="range" id="interior" min="0" max="15000" step="500" value="9000">
      <input type="number" class="field-value" id="interiorVal" value="9000" min="0" max="999999">
      <span class="field-unit">ë§Œì›</span>
    </div>
  </div>

  <div class="section-label">ğŸ¦ ëŒ€ì¶œ ì¡°ê±´</div>
  <div class="field">
    <label>ì˜ˆìƒ ê¸ˆë¦¬</label>
    <div class="field-row">
      <input type="range" id="rate" min="2.0" max="6.0" step="0.1" value="4.0">
      <input type="number" class="field-value" id="rateVal" value="4.0" min="0" max="20" step="0.1">
      <span class="field-unit">%</span>
    </div>
  </div>
  <div class="field">
    <label>ëŒ€ì¶œ ë§Œê¸°</label>
    <div class="field-row">
      <input type="range" id="term" min="10" max="40" step="5" value="30">
      <input type="number" class="field-value" id="termVal" value="30" min="1" max="50">
      <span class="field-unit">ë…„</span>
    </div>
  </div>
  <div class="field">
    <label>ì›” ìƒí™˜ í•œë„ (ê´€ë¦¬ë¹„ í¬í•¨)</label>
    <div class="field-row">
      <input type="range" id="monthlyLimit" min="100" max="400" step="10" value="200">
      <input type="number" class="field-value" id="monthlyLimitVal" value="200" min="0" max="9999">
      <span class="field-unit">ë§Œì›</span>
    </div>
  </div>
  <div class="field">
    <label>ê´€ë¦¬ë¹„ ì˜ˆìƒ</label>
    <div class="field-row">
      <input type="range" id="mgmt" min="10" max="60" step="5" value="35">
      <input type="number" class="field-value" id="mgmtVal" value="35" min="0" max="999">
      <span class="field-unit">ë§Œì›</span>
    </div>
  </div>

  <div class="section-label">ğŸ“ ê·œì œ ì„¤ì • <span style="font-size:9px;color:var(--accent);letter-spacing:0">â† ì •ë¶€ ì •ì±…</span></div>
  
  <div class="policy-ref">
    <div class="policy-ref-title">í˜„í–‰ LTV ê¸°ì¤€</div>
    <div class="policy-ref-row"><span class="ref-dot" style="background:var(--green)"></span> ë¹„ê·œì œ: 70%</div>
    <div class="policy-ref-row"><span class="ref-dot" style="background:var(--yellow)"></span> ì¡°ì •ëŒ€ìƒ: 50%</div>
    <div class="policy-ref-row"><span class="ref-dot" style="background:var(--red)"></span> íˆ¬ê¸°ê³¼ì—´: 40%</div>
    <div class="policy-ref-row"><span class="ref-dot" style="background:var(--blue)"></span> ìƒì• ìµœì´ˆ: 80% (íŠ¹ë¡€)</div>
  </div>
  <div class="field">
    <label>ì ìš© LTV <span class="field-hint">ì‹œë®¬ë ˆì´ì…˜ìš© â€” ì •ì±… ë³€ê²½ ì‹œ ì¡°ì ˆ</span></label>
    <div class="field-row">
      <input type="range" id="ltv" min="0" max="80" step="5" value="70">
      <input type="number" class="field-value" id="ltvVal" value="70" min="0" max="100">
      <span class="field-unit">%</span>
    </div>
  </div>

  <div class="policy-ref" style="margin-top:12px">
    <div class="policy-ref-title">í˜„í–‰ DSR ê¸°ì¤€</div>
    <div class="policy-ref-row"><span class="ref-dot" style="background:var(--text-mid)"></span> ì „ ê¸ˆìœµê¶Œ ê³µí†µ: 40%</div>
    <div class="policy-ref-row" style="color:var(--text-dim);font-size:10px;margin-left:14px">= ì—°ì†Œë“ ëŒ€ë¹„ ì „ì²´ ëŒ€ì¶œ ì›ë¦¬ê¸ˆ ë¹„ìœ¨ ìƒí•œ</div>
  </div>
  <div class="field">
    <label>ì ìš© DSR <span class="field-hint">ì‹œë®¬ë ˆì´ì…˜ìš© â€” ì •ì±… ë³€ê²½ ì‹œ ì¡°ì ˆ</span></label>
    <div class="field-row">
      <input type="range" id="dsr" min="20" max="60" step="5" value="40">
      <input type="number" class="field-value" id="dsrVal" value="40" min="0" max="100">
      <span class="field-unit">%</span>
    </div>
  </div>

  <div class="section-label">ğŸ˜ï¸ ì£¼íƒ ìƒíƒœ</div>
  <div class="field">
    <label>í˜„ì¬ ì£¼íƒ ìˆ˜</label>
    <select id="houseCount">
      <option value="0">ë¬´ì£¼íƒ</option>
      <option value="1" selected>1ì£¼íƒ (ëŒ€êµ¬)</option>
      <option value="2">2ì£¼íƒ ì´ìƒ</option>
    </select>
  </div>
</aside>

<!-- ===== MAIN ===== -->
<main class="main" id="main">

  <!-- Top Stats -->
  <div class="stats-row" id="statsRow">
    <div class="stat-card">
      <div class="stat-label">í•©ì‚° ì—°ì†Œë“</div>
      <div class="stat-value" id="totalIncome">8,740ë§Œ</div>
      <div class="stat-sub" id="totalIncomeSub">ë³¸ì¸ 4,740 + ë°°ìš°ì 4,000</div>
    </div>
    <div class="stat-card">
      <div class="stat-label">íˆ¬ì… ê°€ëŠ¥ ìê¸°ìê¸ˆ</div>
      <div class="stat-value" id="equity">6,000ë§Œ</div>
      <div class="stat-sub" id="equitySub">ì´ 15,000 - ì¸í…Œë¦¬ì–´ 9,000</div>
    </div>
    <div class="stat-card">
      <div class="stat-label">ìµœëŒ€ ë§¤ìˆ˜ ê°€ëŠ¥ê°€</div>
      <div class="stat-value" id="maxPrice" style="color:var(--accent)">â€”</div>
      <div class="stat-sub" id="maxPriceSub">LTV + DSR + ìê¸°ìê¸ˆ ì¢…í•©</div>
      <div class="stat-bar"><div class="stat-bar-fill" id="maxPriceBar" style="width:0%;background:var(--accent)"></div></div>
    </div>
    <div class="stat-card">
      <div class="stat-label">ì›” ìƒí™˜ ì—¬ë ¥</div>
      <div class="stat-value" id="monthlyLeft">â€”</div>
      <div class="stat-sub" id="monthlyLeftSub">í•œë„ 200ë§Œ - ê´€ë¦¬ë¹„ 35ë§Œ = 165ë§Œ</div>
      <div class="stat-bar"><div class="stat-bar-fill" id="monthlyBar" style="width:0%;background:var(--green)"></div></div>
    </div>
  </div>

  <!-- Loan Breakdown -->
  <div class="section">
    <div class="section-header">
      <div class="section-title">ğŸ¦ ëŒ€ì¶œ í•œë„ ë¶„ì„</div>
      <div class="section-badge" id="loanBadge">ì‹¤ì‹œê°„ ê³„ì‚°</div>
    </div>
    <div class="loan-grid">
      <div class="loan-card" id="ltvCard">
        <div class="loan-label">LTV ê¸°ì¤€ ìµœëŒ€ ëŒ€ì¶œ</div>
        <div class="loan-big" id="ltvMax">â€”</div>
        <div class="loan-detail" id="ltvDetail">â€”</div>
      </div>
      <div class="loan-card" id="dsrCard">
        <div class="loan-label">DSR ê¸°ì¤€ ìµœëŒ€ ëŒ€ì¶œ</div>
        <div class="loan-big" id="dsrMax">â€”</div>
        <div class="loan-detail" id="dsrDetail">â€”</div>
      </div>
      <div class="loan-card" id="monthlyCard">
        <div class="loan-label">ì›” ìƒí™˜ ê¸°ì¤€ ìµœëŒ€ ëŒ€ì¶œ</div>
        <div class="loan-big" id="monthlyMax">â€”</div>
        <div class="loan-detail" id="monthlyDetail">â€”</div>
      </div>
      <div class="loan-card" id="finalCard">
        <div class="loan-label">âœ… ì‹¤ì œ ê°€ëŠ¥ ëŒ€ì¶œ (ìµœì†Ÿê°’)</div>
        <div class="loan-big" id="finalLoan" style="color:var(--accent)">â€”</div>
        <div class="loan-detail" id="finalDetail">â€”</div>
      </div>
    </div>
  </div>

  <!-- ë§¤ë¬¼ ì¡°ê±´ ìš”ì•½ -->
  <div class="section">
    <div class="section-header">
      <div class="section-title">ğŸ” ë§¤ë¬¼ íƒìƒ‰ ì¡°ê±´</div>
      <div class="section-badge">í˜„ì¬ ë°°ì¹˜ ì„¤ì • ê¸°ì¤€</div>
    </div>
    <div class="condition-row">
      <div class="cond-chip">ğŸ“ 59~84ã¡ (20í‰ëŒ€)</div>
      <div class="cond-chip">ğŸš‡ ì—­ì„¸ê¶Œ ë„ë³´ 15ë¶„ ì´ë‚´</div>
      <div class="cond-chip">ğŸ¢ 200ì„¸ëŒ€ ì´ìƒ</div>
      <div class="cond-chip">ğŸ’° ë§¤ë§¤ê°€ 6ì–µ ì´í•˜</div>
      <div class="cond-chip">ğŸš‹ ì‹ ë¶„ë‹¹ì„  ë¼ì¸</div>
      <div class="cond-chip">ğŸ“ ì„œìš¸ ë™ë‚¨ë¶€ Â· ì„±ë‚¨ Â· ìš©ì¸ Â· ê³¼ì²œ Â· ì•ˆì–‘ Â· í•˜ë‚¨ Â· ê´‘ì£¼</div>
    </div>
  </div>

  <!-- Property Table -->
  <div class="section">
    <div class="section-header">
      <div class="section-title">ğŸ˜ï¸ ê´€ì‹¬ ë§¤ë¬¼ ì‹œë®¬ë ˆì´ì…˜</div>
      <div class="section-badge" id="propertyBadge">ë§¤ë¬¼ë³„ ìë™ ê³„ì‚°</div>
    </div>
    <div class="table-wrap">
      <table>
        <thead>
          <tr>
            <th>ë‹¨ì§€ëª…</th>
            <th>ì§€ì—­</th>
            <th>ë©´ì </th>
            <th>ë§¤ë§¤ê°€</th>
            <th>í•„ìš” ìê¸°ìê¸ˆ</th>
            <th>ëŒ€ì¶œì•¡</th>
            <th>ì›”ìƒí™˜</th>
            <th>íŒì •</th>
          </tr>
        </thead>
        <tbody id="propertyBody"></tbody>
      </table>
    </div>
  </div>

  <!-- Policy Timeline -->
  <div class="section">
    <div class="section-header">
      <div class="section-title">ğŸ“œ ìµœê·¼ ì •ì±… ë³€ë™</div>
      <div class="section-badge">ì˜í–¥ë„ ë¶„ì„</div>
    </div>
    <div class="timeline">
      <div class="tl-item">
        <div class="tl-dot high"></div>
        <div class="tl-date">2025.10.15</div>
        <div class="tl-body">
          <div class="tl-title">10.15 ì£¼íƒì‹œì¥ ì•ˆì •í™” ëŒ€ì±…</div>
          <div class="tl-impact">ì„œìš¸ ì „ì—­ + ê²½ê¸° 12ê³³ ê·œì œì§€ì—­ ì§€ì •<br><em>â†’ ì„±ë‚¨Â·ì•ˆì–‘ LTV 40~50%, ìš©ì¸ ìˆ˜ì§€Â·ê²½ê¸° ê´‘ì£¼ëŠ” ë¹„ê·œì œ ìœ ì§€ (70%)</em></div>
        </div>
      </div>
      <div class="tl-item">
        <div class="tl-dot high"></div>
        <div class="tl-date">2025.06.27</div>
        <div class="tl-body">
          <div class="tl-title">6.27 ê°€ê³„ë¶€ì±„ ê´€ë¦¬ ê°•í™”</div>
          <div class="tl-impact">ìˆ˜ë„ê¶Œ ì£¼ë‹´ëŒ€ í•œë„ 6ì–µ ì œí•œ, ìƒì• ìµœì´ˆ LTV 80%â†’70%<br><em>â†’ ìê¸°ìê¸ˆ ë¹„ì¤‘ ìƒìŠ¹, ë§¤ìˆ˜ê°€ëŠ¥ ê°€ê²©ëŒ€ í•˜í–¥ ì••ë°•</em></div>
        </div>
      </div>
      <div class="tl-item">
        <div class="tl-dot mid"></div>
        <div class="tl-date">2025.11</div>
        <div class="tl-body">
          <div class="tl-title">ê¸°ì¤€ê¸ˆë¦¬ ì¸í•˜ 3.0% â†’ 2.75%</div>
          <div class="tl-impact"><em>â†’ ì›” ìƒí™˜ ë¶€ë‹´ ì†Œí­ ê²½ê°, 3.5ì–µ ê¸°ì¤€ ì›” ~8ë§Œì› ì ˆê°</em></div>
        </div>
      </div>
      <div class="tl-item">
        <div class="tl-dot low"></div>
        <div class="tl-date">2025.02.15</div>
        <div class="tl-body">
          <div class="tl-title">ì–‘ë„ì†Œë“ì„¸ ì¤‘ê³¼ ìœ ì˜ˆ ì¢…ë£Œ ì¶”ì§„</div>
          <div class="tl-impact"><em>â†’ ëŒ€êµ¬ ë§¤ë„(2026.3~) ì‹œ ì–‘ë„ì„¸ ì‹œë®¬ë ˆì´ì…˜ ì¬í™•ì¸ í•„ìš”</em></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Policy Loan Eligibility (í•˜ë‹¨ ë°°ì¹˜) -->
  <div class="section">
    <div class="section-header">
      <div class="section-title">ğŸ¯ ì •ì±…ëŒ€ì¶œ ìê²© ì²´í¬</div>
      <div class="section-badge" id="policyBadge">ì†Œë“ ì—°ë™ ìë™ íŒì •</div>
    </div>
    <div class="policy-grid" id="policyGrid"></div>
  </div>

  <div class="footer">
    ìŠ¬ë¼ì´ë” ê°’ì„ ë³€ê²½í•˜ë©´ ëª¨ë“  ìˆ«ìê°€ ì‹¤ì‹œê°„ìœ¼ë¡œ ì¬ê³„ì‚°ë©ë‹ˆë‹¤ Â· ë¶€ë™ì‚° ë§¤ìˆ˜ í”„ë¡œì íŠ¸ 2026
    <br><span id="dataStatus" style="color:var(--accent)">ë°ì´í„° ë¡œë”© ì¤‘...</span>
  </div>
</main>
</div>

<script>
// ============================================================
// ë§¤ë¬¼ ë°ì´í„° â€” data.jsonì—ì„œ ë¡œë”©
// ============================================================
let PROPERTIES = [];
let DATA_LOADED = false;
let DATA_UPDATED_AT = '';

// ê°™ì€ ë‹¨ì§€+ë©´ì  ê·¸ë£¹í•‘ â†’ ëŒ€í‘œ ë°ì´í„°ë¡œ ë³€í™˜
function groupProperties(rawItems) {
  const groups = {};
  rawItems.forEach(item => {
    const key = `${item.region}_${item.name}_${item.area_m2}`;
    if (!groups[key]) {
      groups[key] = {
        name: item.name,
        region: item.region,
        area: Math.round(item.area_m2) + 'ã¡',
        area_py: item.area_py,
        regulated: item.regulated || false,
        station: item.walk_min ? `ë„ë³´ ${item.walk_min}ë¶„` : 'ì—­ì •ë³´ ì—†ìŒ',
        station_name: item.station || '',
        line: item.line || '',
        walk_min: item.walk_min,
        dong: item.dong || '',
        built_year: item.built_year || 0,
        households: item.households || 0,
        link: item.link || '',
        prices: [],
        floors: [],
        dates: [],
      };
    }
    groups[key].prices.push(item.price);
    groups[key].floors.push(item.floor);
    groups[key].dates.push(item.trade_date);
  });

  return Object.values(groups).map(g => {
    const avgPrice = Math.round(g.prices.reduce((a,b) => a+b, 0) / g.prices.length);
    return {
      name: g.name,
      region: g.region,
      area: g.area,
      price: avgPrice,
      regulated: g.regulated,
      station: g.station,
      station_name: g.station_name,
      line: g.line,
      walk_min: g.walk_min,
      dong: g.dong,
      built_year: g.built_year,
      households: g.households,
      link: g.link,
      trade_count: g.prices.length,
      min_price: Math.min(...g.prices),
      max_price: Math.max(...g.prices),
      latest_date: g.dates.sort().reverse()[0] || '',
      price_per_py: g.area_py > 0 ? Math.round(avgPrice / g.area_py) : 0,
    };
  }).sort((a,b) => a.price - b.price);
}

// data.json ë¡œë”©
async function loadData() {
  try {
    const resp = await fetch('data.json');
    if (!resp.ok) throw new Error('data.json ì—†ìŒ');
    const data = await resp.json();
    DATA_UPDATED_AT = data.updated_at || '';
    PROPERTIES = groupProperties(data.properties || []);
    DATA_LOADED = true;
    console.log(`âœ… data.json ë¡œë”© ì™„ë£Œ: ${PROPERTIES.length}ê°œ ë‹¨ì§€`);
  } catch (e) {
    console.warn('âš ï¸ data.json ë¡œë”© ì‹¤íŒ¨, ìƒ˜í”Œ ë°ì´í„° ì‚¬ìš©:', e.message);
    PROPERTIES = [
      { name:"(ìƒ˜í”Œ) ë°ì´í„° ë¡œë”© ëŒ€ê¸°", region:"â€”", area:"â€”", price:0, regulated:false, station:"â€”" },
    ];
    DATA_LOADED = false;
  }
  update();
}

// ============================================================
// ê³„ì‚° í•¨ìˆ˜ë“¤
// ============================================================
function getVal(id) {
  // ìˆ«ì ì…ë ¥ì¹¸ì´ ìˆìœ¼ë©´ ê±°ê¸°ì„œ ì½ê¸° (ìŠ¬ë¼ì´ë” ë²”ìœ„ ë°–ë„ í—ˆìš©)
  const input = document.getElementById(id + 'Val');
  if (input && input.value !== '') return parseFloat(input.value);
  return parseFloat(document.getElementById(id).value);
}

function fmt(n) {
  if (n >= 10000) return (n/10000).toFixed(1).replace(/\.0$/,'') + 'ì–µ';
  return n.toLocaleString() + 'ë§Œ';
}
function fmtShort(n) {
  if (n >= 10000) {
    const uk = Math.floor(n / 10000);
    const man = n % 10000;
    if (man === 0) return uk + 'ì–µ';
    return uk + 'ì–µ ' + man.toLocaleString() + 'ë§Œ';
  }
  return n.toLocaleString() + 'ë§Œ';
}

// ì›ë¦¬ê¸ˆê· ë“± ì›” ìƒí™˜ì•¡ ê³„ì‚°
function monthlyPayment(principal, annualRate, years) {
  if (principal <= 0) return 0;
  const r = annualRate / 100 / 12;
  const n = years * 12;
  if (r === 0) return principal / n;
  return principal * r * Math.pow(1+r, n) / (Math.pow(1+r, n) - 1);
}

// ì›”ìƒí™˜ì•¡ â†’ ì—­ì‚° ìµœëŒ€ ëŒ€ì¶œ
function maxLoanFromMonthly(monthlyMax, annualRate, years) {
  const r = annualRate / 100 / 12;
  const n = years * 12;
  if (r === 0) return monthlyMax * n;
  return monthlyMax * (Math.pow(1+r, n) - 1) / (r * Math.pow(1+r, n));
}

// ============================================================
// ë©”ì¸ ì—…ë°ì´íŠ¸
// ============================================================
function update() {
  const income1 = getVal('income1');
  const income2 = getVal('income2');
  const totalIncome = income1 + income2;
  const cash = getVal('cash');
  const interior = getVal('interior');
  const equity = Math.max(0, cash - interior);
  const rate = getVal('rate');
  const term = getVal('term');
  const monthlyLimit = getVal('monthlyLimit');
  const mgmt = getVal('mgmt');
  const ltvPct = getVal('ltv');
  const dsrPct = getVal('dsr');
  const houseCount = parseInt(document.getElementById('houseCount').value);

  // ê°’ ë™ê¸°í™”ëŠ” ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì—ì„œ ì²˜ë¦¬ë¨ â€” ì—¬ê¸°ì„œëŠ” ê³„ì‚°ë§Œ

  // ì›” ìƒí™˜ ì—¬ë ¥
  const monthlyRoom = monthlyLimit - mgmt;

  // --- ëŒ€ì¶œ í•œë„ ê³„ì‚° ---

  // 1. DSR ê¸°ì¤€: ì—°ì†Œë“ Ã— DSR% = ì—°ê°„ ìƒí™˜ ê°€ëŠ¥ â†’ ì—­ì‚° ëŒ€ì¶œì•¡
  const annualRepayMax = totalIncome * dsrPct / 100;
  const monthlyRepayFromDSR = annualRepayMax / 12;
  const dsrLoanMax = Math.floor(maxLoanFromMonthly(monthlyRepayFromDSR, rate, term));

  // 2. ì›”ìƒí™˜ ê¸°ì¤€: monthlyRoomìœ¼ë¡œ ì—­ì‚°
  const monthlyLoanMax = Math.floor(maxLoanFromMonthly(monthlyRoom, rate, term));

  // 3. LTV ê¸°ì¤€: ìê¸°ìê¸ˆìœ¼ë¡œ ì—­ì‚° â†’ ë§¤ë§¤ê°€ = equity / (1 - LTV%) â†’ ëŒ€ì¶œ = ë§¤ë§¤ê°€ Ã— LTV%
  let ltvLoanMax;
  if (ltvPct >= 100 || ltvPct <= 0) {
    ltvLoanMax = 0;
  } else {
    const maxPriceFromEquity = equity / (1 - ltvPct/100);
    ltvLoanMax = Math.floor(maxPriceFromEquity * ltvPct / 100);
  }

  // 2ì£¼íƒ ì´ìƒì´ë©´ ëŒ€ì¶œ ë¶ˆê°€ (ê·œì œì§€ì—­)
  let effectiveLTV = ltvPct;
  if (houseCount >= 2) {
    effectiveLTV = 0;
    ltvLoanMax = 0;
  }

  // ì‹¤ì œ ê°€ëŠ¥ ëŒ€ì¶œ = ì„¸ ê¸°ì¤€ ì¤‘ ìµœì†Ÿê°’
  const finalLoan = Math.min(dsrLoanMax, monthlyLoanMax, ltvLoanMax);
  const finalMonthly = Math.floor(monthlyPayment(finalLoan, rate, term));
  const maxPurchasePrice = finalLoan + equity;

  // --- UI ì—…ë°ì´íŠ¸ ---

  // ìƒë‹¨ ìŠ¤íƒ¯
  document.getElementById('totalIncome').textContent = fmtShort(totalIncome);
  document.getElementById('totalIncomeSub').textContent = `ë³¸ì¸ ${income1.toLocaleString()} + ë°°ìš°ì ${income2.toLocaleString()}`;

  document.getElementById('equity').textContent = fmtShort(equity);
  document.getElementById('equitySub').textContent = `ì´ ${cash.toLocaleString()} - ì¸í…Œë¦¬ì–´ ${interior.toLocaleString()}`;

  document.getElementById('maxPrice').textContent = fmtShort(maxPurchasePrice);
  document.getElementById('maxPrice').style.color = maxPurchasePrice >= 30000 ? 'var(--green)' : maxPurchasePrice >= 20000 ? 'var(--yellow)' : 'var(--red)';
  document.getElementById('maxPriceSub').textContent = `ìê¸°ìê¸ˆ ${fmtShort(equity)} + ëŒ€ì¶œ ${fmtShort(finalLoan)}`;
  document.getElementById('maxPriceBar').style.width = Math.min(100, maxPurchasePrice / 600 * 100) + '%';

  document.getElementById('monthlyLeft').textContent = monthlyRoom + 'ë§Œ';
  document.getElementById('monthlyLeft').style.color = monthlyRoom >= 150 ? 'var(--green)' : monthlyRoom >= 100 ? 'var(--yellow)' : 'var(--red)';
  document.getElementById('monthlyLeftSub').textContent = `í•œë„ ${monthlyLimit}ë§Œ - ê´€ë¦¬ë¹„ ${mgmt}ë§Œ = ${monthlyRoom}ë§Œ`;
  document.getElementById('monthlyBar').style.width = Math.min(100, monthlyRoom / 250 * 100) + '%';

  // ëŒ€ì¶œ ì¹´ë“œë“¤
  const ltvCard = document.getElementById('ltvCard');
  document.getElementById('ltvMax').textContent = fmtShort(ltvLoanMax);
  document.getElementById('ltvDetail').innerHTML = `LTV ${effectiveLTV}% ì ìš© ì‹œ<br><span>ìê¸°ìê¸ˆ ${fmtShort(equity)} â†’ ë§¤ë§¤ê°€ ${fmtShort(Math.floor(equity / (1 - effectiveLTV/100)))}ê¹Œì§€</span>`;
  ltvCard.className = 'loan-card ' + (ltvLoanMax >= finalLoan ? 'ok' : 'warn');

  const dsrCard = document.getElementById('dsrCard');
  document.getElementById('dsrMax').textContent = fmtShort(dsrLoanMax);
  document.getElementById('dsrDetail').innerHTML = `DSR ${dsrPct}% Â· ì—°ì†Œë“ ${fmtShort(totalIncome)}<br><span>ì—° ìƒí™˜í•œë„ ${fmtShort(annualRepayMax)} (ì›” ${Math.floor(monthlyRepayFromDSR)}ë§Œ)</span>`;
  dsrCard.className = 'loan-card ' + (dsrLoanMax >= finalLoan ? 'ok' : 'warn');

  const mCard = document.getElementById('monthlyCard');
  document.getElementById('monthlyMax').textContent = fmtShort(monthlyLoanMax);
  document.getElementById('monthlyDetail').innerHTML = `ì›” ${monthlyRoom}ë§Œ ìƒí™˜ ê°€ëŠ¥<br><span>ê¸ˆë¦¬ ${rate}% Â· ${term}ë…„ ì›ë¦¬ê¸ˆê· ë“±</span>`;
  mCard.className = 'loan-card ' + (monthlyLoanMax >= finalLoan ? 'ok' : 'warn');

  const fCard = document.getElementById('finalCard');
  document.getElementById('finalLoan').textContent = fmtShort(finalLoan);
  document.getElementById('finalDetail').innerHTML = `ì›” ìƒí™˜ ${finalMonthly}ë§Œ Â· ë§¤ìˆ˜ê°€ëŠ¥ ${fmtShort(maxPurchasePrice)}<br><span>LTVÂ·DSRÂ·ì›”ìƒí™˜ ì¤‘ ê°€ì¥ ë‚®ì€ ê°’ ì ìš©</span>`;
  
  // ë³‘ëª© í‘œì‹œ
  let bottleneck = 'LTV';
  if (finalLoan === dsrLoanMax) bottleneck = 'DSR';
  if (finalLoan === monthlyLoanMax) bottleneck = 'ì›”ìƒí™˜';
  document.getElementById('loanBadge').textContent = `ë³‘ëª©: ${bottleneck}`;

  // --- ë§¤ë¬¼ í…Œì´ë¸” ---
  const tbody = document.getElementById('propertyBody');
  tbody.innerHTML = '';
  
  PROPERTIES.forEach(p => {
    const pLTV = p.regulated ? Math.min(effectiveLTV, 50) : effectiveLTV;
    const pLoan = Math.min(Math.floor(p.price * pLTV / 100), finalLoan);
    const pEquityNeeded = p.price - pLoan;
    const pMonthly = Math.floor(monthlyPayment(pLoan, rate, term));
    
    let verdict, verdictClass, verdictTag;
    if (pEquityNeeded > equity) {
      verdict = 'ìê¸ˆë¶€ì¡±'; verdictClass = 'afford-no'; verdictTag = 'tag-danger';
    } else if (pMonthly > monthlyRoom) {
      verdict = 'ìƒí™˜ì´ˆê³¼'; verdictClass = 'afford-no'; verdictTag = 'tag-danger';
    } else if (pMonthly > monthlyRoom * 0.85) {
      verdict = 'ë¹ ë“¯í•¨'; verdictClass = 'afford-tight'; verdictTag = 'tag-warn';
    } else {
      verdict = 'ë§¤ìˆ˜ê°€ëŠ¥'; verdictClass = 'afford-yes'; verdictTag = 'tag-ok';
    }

    const tr = document.createElement('tr');
    const stationLine = p.line ? `<span style="font-size:10px;color:var(--text-dim)">${p.line}</span> ` : '';
    const nameLink = p.link ? `<a href="${p.link}" target="_blank" style="color:var(--text);text-decoration:none;border-bottom:1px dashed var(--border)">${p.name}</a>` : p.name;
    const extraInfo = [];
    if (p.built_year) extraInfo.push(`${p.built_year}ë…„`);
    if (p.households) extraInfo.push(`${p.households}ì„¸ëŒ€`);
    if (p.trade_count > 1) extraInfo.push(`${p.trade_count}ê±´`);
    const extraStr = extraInfo.length > 0 ? extraInfo.join(' Â· ') : '';
    
    tr.innerHTML = `
      <td><strong>${nameLink}</strong><br><span style="font-size:11px;color:var(--text-dim)">${stationLine}${p.station}</span>${extraStr ? `<br><span style="font-size:10px;color:var(--text-dim)">${extraStr}</span>` : ''}</td>
      <td><span class="tag tag-region">${p.region}</span></td>
      <td>${p.area}</td>
      <td class="mono">${fmtShort(p.price)}</td>
      <td class="mono" style="color:${pEquityNeeded > equity ? 'var(--red)' : 'var(--text)'}">${fmtShort(pEquityNeeded)}</td>
      <td class="mono">${fmtShort(pLoan)}<br><span style="font-size:10px;color:var(--text-dim)">LTV ${pLTV}%</span></td>
      <td class="mono" style="color:${pMonthly > monthlyRoom ? 'var(--red)' : pMonthly > monthlyRoom*0.85 ? 'var(--yellow)' : 'var(--green)'}">${pMonthly}ë§Œ</td>
      <td><span class="tag ${verdictTag}">${verdict}</span></td>
    `;
    tbody.appendChild(tr);
  });

  // --- ì •ì±…ëŒ€ì¶œ ìê²© íŒì • ---
  const policyLoans = [
    {
      name: 'ë””ë”¤ëŒ ëŒ€ì¶œ',
      icon: 'ğŸ ',
      incomeLimit: 6000,
      desc: 'ë¶€ë¶€í•©ì‚° ì—°ì†Œë“ 6,000ë§Œì› ì´í•˜',
      maxLoan: 'ìµœëŒ€ 2.5ì–µ (LTV 70%)',
      rate: 'ì—° 2.15~3.00%',
      conditions: ['ë¬´ì£¼íƒ ì„¸ëŒ€ì£¼', 'ì£¼íƒê°€ê²© 5ì–µ ì´í•˜ (ìˆ˜ë„ê¶Œ)'],
      houseReq: 0,
    },
    {
      name: 'ë³´ê¸ˆìë¦¬ë¡ ',
      icon: 'ğŸ›¡ï¸',
      incomeLimit: 7000,
      desc: 'ë¶€ë¶€í•©ì‚° ì—°ì†Œë“ 7,000ë§Œì› ì´í•˜',
      maxLoan: 'ìµœëŒ€ 3.6ì–µ',
      rate: 'ì—° 3.25~3.85%',
      conditions: ['ë¬´ì£¼íƒ ë˜ëŠ” 1ì£¼íƒ ì²˜ë¶„ ì¡°ê±´', 'ì£¼íƒê°€ê²© 6ì–µ ì´í•˜'],
      houseReq: 1,
    },
    {
      name: 'ì‹ í˜¼ë¶€ë¶€ êµ¬ì…ìê¸ˆ',
      icon: 'ğŸ’',
      incomeLimit: 8500,
      desc: 'ë¶€ë¶€í•©ì‚° ì—°ì†Œë“ 8,500ë§Œì› ì´í•˜',
      maxLoan: 'ìµœëŒ€ 3ì–µ (LTV 80%)',
      rate: 'ì—° 1.85~2.70%',
      conditions: ['í˜¼ì¸ 7ë…„ ì´ë‚´', 'ë¬´ì£¼íƒ ì„¸ëŒ€ì£¼', 'ì£¼íƒê°€ê²© 5ì–µ ì´í•˜'],
      houseReq: 0,
    },
    {
      name: 'ì‹ ìƒì•„ íŠ¹ë¡€ êµ¬ì…',
      icon: 'ğŸ‘¶',
      incomeLimit: 20000,
      desc: 'ë¶€ë¶€í•©ì‚° ì—°ì†Œë“ 2ì–µì› ì´í•˜',
      maxLoan: 'ìµœëŒ€ 5ì–µ (LTV 70~80%)',
      rate: 'ì—° 1.60~3.30%',
      conditions: ['2ë…„ ë‚´ ì¶œìƒì•„ í•„ìš”', 'ë¬´ì£¼íƒ', 'ì£¼íƒê°€ê²© 9ì–µ ì´í•˜'],
      houseReq: 0,
      special: 'ì¶œì‚° ì‹œ í™œìš© ê°€ëŠ¥',
    },
    {
      name: 'ìƒì• ìµœì´ˆ íŠ¹ë¡€',
      icon: 'ğŸŒŸ',
      incomeLimit: 10000,
      desc: 'ë¶€ë¶€í•©ì‚° ì—°ì†Œë“ 1ì–µì› ì´í•˜',
      maxLoan: 'ìµœëŒ€ 4ì–µ (LTV 80%)',
      rate: 'ì‹œì¤‘ê¸ˆë¦¬ (ìš°ëŒ€ 0.1~0.2%p)',
      conditions: ['ìƒì•  ìµœì´ˆ ì£¼íƒ êµ¬ì…', 'ë¬´ì£¼íƒ', 'ì£¼íƒê°€ê²© 9ì–µ ì´í•˜'],
      houseReq: 0,
    },
  ];

  const policyGrid = document.getElementById('policyGrid');
  policyGrid.innerHTML = '';
  let eligibleCount = 0;

  policyLoans.forEach(loan => {
    const gap = totalIncome - loan.incomeLimit;
    const isIncomeOk = gap <= 0;
    const isHouseOk = houseCount <= loan.houseReq;
    const isSpecial = !!loan.special;

    let statusClass, statusText, cardClass, gapClass, gapText;

    if (isIncomeOk && isHouseOk && !isSpecial) {
      statusClass = 'yes'; statusText = 'âœ… ìê²© ì¶©ì¡±';
      cardClass = 'eligible'; eligibleCount++;
    } else if (isSpecial) {
      statusClass = 'check'; statusText = 'â³ ' + loan.special;
      cardClass = 'checking';
    } else if (isIncomeOk && !isHouseOk) {
      statusClass = 'maybe'; statusText = 'â³ ë¬´ì£¼íƒ ì „í™˜ ì‹œ ê°€ëŠ¥';
      cardClass = 'conditional';
    } else if (!isIncomeOk && gap <= 1000) {
      statusClass = 'maybe'; statusText = 'âš ï¸ ì†Œë“ ê·¼ì ‘ (ê¸°ì¤€ ì™„í™” ì‹œ ê°€ëŠ¥)';
      cardClass = 'conditional';
    } else {
      statusClass = 'no'; statusText = 'âŒ ì†Œë“ ì´ˆê³¼';
      cardClass = 'ineligible';
    }

    if (gap > 0) {
      gapText = `${gap.toLocaleString()}ë§Œì› ì´ˆê³¼`;
      gapClass = gap <= 1000 ? 'close' : 'over';
    } else if (gap === 0) {
      gapText = 'ê¸°ì¤€ ë”± ë§ìŒ';
      gapClass = 'close';
    } else {
      gapText = `${Math.abs(gap).toLocaleString()}ë§Œì› ì—¬ìœ `;
      gapClass = 'under';
    }

    const card = document.createElement('div');
    card.className = `policy-card ${cardClass}`;
    card.innerHTML = `
      <div class="policy-name">${loan.icon} ${loan.name} <span class="policy-status ${statusClass}">${statusText}</span></div>
      <div class="policy-detail">
        ì†Œë“ê¸°ì¤€: ${loan.desc}<br>
        í•œë„: ${loan.maxLoan} Â· ê¸ˆë¦¬: ${loan.rate}<br>
        ì¡°ê±´: ${loan.conditions.join(' / ')}
      </div>
      <div class="policy-gap ${gapClass}">ì†Œë“ ${gapText}</div>
    `;
    policyGrid.appendChild(card);
  });

  document.getElementById('policyBadge').textContent = 
    eligibleCount > 0 ? `${eligibleCount}ê°œ ìê²© ì¶©ì¡±!` : 'ì†Œë“ ì—°ë™ ìë™ íŒì •';

  // --- ë°ì´í„° ìƒíƒœ í‘œì‹œ ---
  const statusEl = document.getElementById('dataStatus');
  if (DATA_LOADED) {
    statusEl.textContent = `ğŸ“Š ${PROPERTIES.length}ê°œ ë‹¨ì§€ Â· ë§ˆì§€ë§‰ ê°±ì‹ : ${DATA_UPDATED_AT}`;
    statusEl.style.color = 'var(--green)';
  } else {
    statusEl.textContent = 'âš ï¸ data.json ì—†ìŒ â€” ë°°ì¹˜ ì‹¤í–‰ í›„ ë°ì´í„°ê°€ í‘œì‹œë©ë‹ˆë‹¤';
    statusEl.style.color = 'var(--yellow)';
  }
  
  // ë§¤ë¬¼ ë°°ì§€ ì—…ë°ì´íŠ¸
  const badge = document.getElementById('propertyBadge');
  if (badge) {
    badge.textContent = DATA_LOADED ? `${PROPERTIES.length}ê°œ ë‹¨ì§€ Â· ì‹¤ë°ì´í„°` : 'ë°ì´í„° ì—†ìŒ';
  }
}

// ============================================================
// ì´ë²¤íŠ¸ ì—°ê²°: ìŠ¬ë¼ì´ë” â†” ìˆ«ì ì…ë ¥ ì–‘ë°©í–¥ ë™ê¸°í™”
// ============================================================
const PAIRS = [
  ['income1', 'income1Val'],
  ['income2', 'income2Val'],
  ['cash', 'cashVal'],
  ['interior', 'interiorVal'],
  ['rate', 'rateVal'],
  ['term', 'termVal'],
  ['monthlyLimit', 'monthlyLimitVal'],
  ['mgmt', 'mgmtVal'],
  ['ltv', 'ltvVal'],
  ['dsr', 'dsrVal'],
];

PAIRS.forEach(([sliderId, inputId]) => {
  const slider = document.getElementById(sliderId);
  const input = document.getElementById(inputId);

  // ìŠ¬ë¼ì´ë” â†’ ìˆ«ìì¹¸ ë™ê¸°í™” + ì¬ê³„ì‚°
  slider.addEventListener('input', () => {
    input.value = slider.value;
    update();
  });

  // ìˆ«ìì¹¸ â†’ ìŠ¬ë¼ì´ë” ë™ê¸°í™” + ì¬ê³„ì‚°
  input.addEventListener('input', () => {
    slider.value = input.value;
    update();
  });
});

// selectë„ ì—°ê²°
document.getElementById('houseCount').addEventListener('change', update);

// data.json ë¡œë”© í›„ update() í˜¸ì¶œ
loadData();
</script>
</body>
</html>
