# 🖥️ 부동산 대시보드 진행상황

> 최종 업데이트: 2026.02.18
> 배포: https://haan6892.github.io/real-estate-monitor/
> 레포: HAAN6892/real-estate-monitor

---

## 현재 상태: 핵심 기능 완료, UX 개선 + 지오코딩 정비 완료

### 완료된 작업

**Phase 1 — 데이터 파이프라인 (✅ 완료)**
- GitHub Actions 하루 2회(08:00/20:00 KST) 자동 실행
- 정부 API → 매매+전월세 실거래 수집 → data.json / data-rent.json 생성
- 텔레그램 알림 (간결 요약 + 대시보드 링크)
- Notion DB 저장 (매물 트래커)
- 14개+ 지역 모니터링 (강남·서초·송파·강동·과천·안양·성남·하남·용인·광주 + 수원·군포·의왕·구리)
- 필터: 전용 59~84㎡, 200세대 이상, 6억 이하
- 카카오맵 지오코딩: coord_cache.json 캐시 + 자동 좌표 변환

**Phase 2 — 대시보드 핵심 기능 (✅ 완료)**

| 기능 | 상태 | 비고 |
|------|:----:|------|
| 매수/전세 모드 토글 | ✅ | 상단 버튼으로 전환 |
| 매물 시뮬레이션 테이블 | ✅ | 매물별 대출·자기자금·월상환·판정 자동 계산 |
| 전세 실거래 테이블 | ✅ | 636개 전세/월세 데이터, 유형·판정 필터 |
| settings.json 연동 | ✅ | 소득·자금·금리·LTV·DSR 설정 실시간 반영 |
| 대출한도 3병목 분석 (매수) | ✅ | LTV / DSR / 월상환 중 최솟값 → 병목 표시 |
| 전세 대출 분석 | ✅ | 정책/시중은행 전환, 월 이자 계산, DSR 미적용 |
| 정책대출 자격 체크 (매수) | ✅ | 디딤돌·보금자리론·신혼부부·신생아 특례 |
| 정책대출 자격 체크 (전세) | ✅ | 청년 버팀목·일반 버팀목·신혼부부·신생아 특례·중기청 |
| 혼인신고 토글 | ✅ | 신고 완료/미신고 → 소득 기준 전환 → 정책대출 자격 자동 재판정 |
| 링크 최적화 | ✅ | 네이버 부동산·호갱노노·아실·KB부동산·국토부 실거래가 |
| 면적 표시 토글 (㎡/평) | ✅ | |
| 거래 히스토리 펼치기 | ✅ | 가격 변동폭 표시 |
| 탭 메뉴 | ✅ | 매물 시뮬레이션 / 정책·대출 |
| 규제 기준값 표시 | ✅ | LTV·DSR 현행 정책 기준 안내 |

**Phase 3 — GitHub Pages 배포 (✅ 완료)**
- https://haan6892.github.io/real-estate-monitor/ 에서 접근 가능
- data.json / data-rent.json / coord_cache.json 모두 배포됨
- 배치 실행 시 자동 커밋 → GitHub Pages 자동 갱신

**Phase 4 — 텔레그램 간결화 (✅ 완료)**
- 매매/전월세 신규 건수 요약 + 지역별 카운트
- 대시보드 링크 포함

**UX 개선 Phase A — 카드 UI + 필터 + 테마 (✅ 완료)**
- 매수 모드: 푸른 톤 (#2563eb 액센트, #f0f4ff 배경)
- 전세 모드: 초록 톤 (#059669 액센트, #f0faf6 배경)
- CSS 변수 기반 테마 스왑 (switchMode 시 자동 적용)
- 카드형 매물 UI (3열 그리드 → 좌우분할 시 1열 컴팩트)
- 카드/테이블 뷰 토글 (▦/≡ 버튼)
- 면적 필터: 전체/소형(~18평)/중형(18~25평)/대형(25평+)
- 정렬: ⭐가성비순(기본)/가격↑↓/면적↓/역세권순/최신거래순

**UX 개선 Phase B — 지도+카드 좌우 분할 (✅ 완료)**
- 매물 시뮬레이션 탭: 지도(58%) + 카드 리스트(42%) 좌우 분할
- 기존 지도 탭 제거 → 시뮬레이션에 통합
- 지도-카드 양방향 연동: 핀 클릭→카드 스크롤+하이라이트, 카드 hover→마커 bounce
- 다른 페이지 매물 클릭 시 자동 페이지 점프
- 지도 영역 필터링: "☑ 지도 영역 내만 표시" 체크박스 (기본 ON)
- map idle 이벤트 → getBounds → 카드/테이블 필터
- 필터 변경 시 지도 핀 동기화

**UX 개선 Phase C — 반응형 (✅ 완료)**
- PC (1024px+): 컴팩트 4줄 카드, 테이블 가로스크롤 없음
- 태블릿 (768~1024px): 50/50 분할, 테이블 핵심 5컬럼만
- 모바일 (<768px): 지도/리스트 서브탭 전환, 핀 클릭→하단 팝업, 필터 가로스크롤

**UX 개선 Phase D — 지도 UX + 지오코딩 정비 + 데이터 필터 (✅ 2026.02.18 완료)**

지도 기능 개선:

| 커밋 | 내용 |
|------|------|
| 41e8929 | 지도 전체화면 토글 + 필터 가독성 개선 + 초기화 버튼 추가 |
| 35c4a68 | 모바일 지도 팝업 정보량 확대 및 UX 개선 |

좌표(지오코딩) 오류 수정:

| 커밋 | 내용 |
|------|------|
| 741ac60 | 지오코딩 검색어에 지역명 추가 (동명 단지 좌표 오류 방지) |
| cae3f9c | 카카오 키워드 검색에서 법정동 제거 (지역 바이어스 방지) |
| 3a1b435 | 카카오 지오코딩 1차/2차 모두 법정동 제거 |
| 8ba0c6e | coord_cache 매칭 — region/sgg_name 불일치 해결 |
| 0546655 | 좌표 전체 초기화 (법정동 제거 로직 반영 위한 재생성) |
| 44cf87b | 건영2 (관악구 신림동) 좌표 수동 수정 |
| 3434ecc | 동신2단지 좌표 수정 (분당 → 수원 장안구) |

데이터 필터링 & UI:

| 커밋 | 내용 |
|------|------|
| 92f3fb9 | 카드에 세대수 표시 + 탐색 조건 텍스트 업데이트 |
| dd235da | 전세 데이터 세대수 필터 + 키워드 제외 필터 추가 |

문서 & 데이터:

| 커밋 | 내용 |
|------|------|
| 1e5bf7c | 진행상황 문서 최신화 |
| 배치 4건 | 자동 데이터 업데이트 (13:02, 13:36, 13:50, 14:22) |

**정책 모니터링 배치 설계 (✅ 설계 완료, 구현 대기)**
- claude-code-prompt-policy-monitor.md 작성 완료
- 주 1회(월요일 09:00 KST) 공식 소스 3곳 크롤링 → 변경 감지 → 텔레그램 알림
- 대상: 주택도시기금 공지, 금융위원회 보도자료, 국토교통부 보도자료
- 대시보드 반영은 수동 (반자동 워크플로우)

---

## 다음 작업

### 즉시: PC/모바일 전체 QA (2026.02.19 예정)

Phase A~D 전체 기능에 대해 PC/모바일 양쪽 동작 검증.
알려진 이슈: 모바일에서 지도형/테이블형 일부 기능 미동작.

**QA 체크리스트는 아래 별도 섹션 참고.**

### 1순위: 지역별 LTV 자동 적용

현재 settings.json LTV 70% 일괄 적용 → 투기과열지구(LTV 40%) 자동 반영.

규제 매핑 (2025.10.15 대책 기준):
- 투기과열 (LTV 40%): 서울 전역, 과천, 안양 동안구, 성남 3구, 하남, 수지구, 수원 3구
- 비규제 (LTV 70%): 안양 만안구, 기흥구, 경기 광주, 구리

**프롬프트:** claude-code-prompt-ltv-auto.md 참고

### 2순위: 정책 변경 감지 배치 구현

**프롬프트:** claude-code-prompt-policy-monitor.md 참고

### 3순위: 파일 분리 리팩토링 (토큰 최적화)

현재 index.html 단일 파일 1,500줄+ → 분리:
- index.html — HTML 구조만
- style.css — 모든 CSS (테마 변수 포함)
- app.js — 로직 전체

---

## 📋 QA 체크리스트 (2026.02.19)

> PC (Chrome 1920×1080) + 모바일 (iPhone/Android 실기기 or DevTools) 양쪽 테스트
> 각 항목: ✅ 통과 / ❌ 실패 (증상 메모) / ⚠️ 개선 필요

### 1. 모드 전환

| # | 테스트 항목 | PC | 모바일 | 비고 |
|---|-----------|:--:|:-----:|------|
| 1.1 | 매수↔전세 모드 토글 동작 | | | 테마 색상 전환 확인 (파랑↔초록) |
| 1.2 | 모드 전환 시 settings 패널 항목 변경 | | | 매수: LTV/DSR/인테리어, 전세: 대출유형/금리/한도 |
| 1.3 | 모드 전환 시 요약 카드 내용 변경 | | | 매수가능가↔전세예산 |
| 1.4 | 모드 전환 시 정책대출 목록 변경 | | | 매수용↔전세용 |
| 1.5 | 혼인신고 토글 → 정책대출 자격 재판정 | | | 부부합산↔단독 소득 기준 전환 |

### 2. 지도 기능

| # | 테스트 항목 | PC | 모바일 | 비고 |
|---|-----------|:--:|:-----:|------|
| 2.1 | 카카오맵 로딩 | | | 지도 타일 정상 표시 |
| 2.2 | 매물 핀 표시 (색상 구분) | | | 🟢가능 / 🟡빡빡함 / 🔴예산초과 |
| 2.3 | 핀 클릭 → 카드 스크롤+하이라이트 (PC) | | | 좌우분할 모드 |
| 2.4 | 핀 클릭 → 하단 팝업 (모바일) | | | 모바일 팝업 정보량 확인 |
| 2.5 | 카드 hover → 마커 bounce (PC) | | | CSS @keyframes |
| 2.6 | 지도 전체화면 토글 | | | 41e8929 신규 기능 |
| 2.7 | "☑ 지도 영역 내만 표시" 필터 | | | 지도 이동 시 카드 리스트 동기화 |
| 2.8 | 다른 페이지 매물 핀 클릭 → 자동 페이지 점프 | | | |
| 2.9 | 지도/리스트 서브탭 전환 (모바일) | | | <768px에서만 표시 |
| 2.10 | 필터 변경 시 지도 핀 동기화 | | | 지역/면적/판정 필터 |

### 3. 카드 UI

| # | 테스트 항목 | PC | 모바일 | 비고 |
|---|-----------|:--:|:-----:|------|
| 3.1 | 카드형 뷰 표시 | | | 3열(PC) / 1열(모바일) |
| 3.2 | 테이블형 뷰 표시 | | | ▦/≡ 토글 버튼 |
| 3.3 | 카드↔테이블 뷰 전환 | | | 뷰 전환 후 데이터 유지 |
| 3.4 | 카드에 세대수 표시 | | | 92f3fb9 신규 |
| 3.5 | 거래 히스토리 펼치기 | | | 가격 변동폭 표시 |
| 3.6 | 외부 링크 (네이버 부동산/호갱노노/아실) | | | 새 탭에서 열림 |

### 4. 필터 & 정렬

| # | 테스트 항목 | PC | 모바일 | 비고 |
|---|-----------|:--:|:-----:|------|
| 4.1 | 검색 (단지명 키워드) | | | |
| 4.2 | 지역 필터 | | | 드롭다운 or 칩 |
| 4.3 | 판정 필터 (가능/빡빡함/예산초과) | | | |
| 4.4 | 면적 필터 (소형/중형/대형) | | | |
| 4.5 | 전세 모드: 유형 필터 (전세/월세) | | | |
| 4.6 | 전세 모드: 세대수 필터 | | | dd235da 신규 |
| 4.7 | 전세 모드: 키워드 제외 필터 | | | dd235da 신규 |
| 4.8 | 정렬: 가성비순 | | | 기본 정렬 |
| 4.9 | 정렬: 가격↑↓ | | | |
| 4.10 | 정렬: 면적↓ | | | |
| 4.11 | 정렬: 역세권순 | | | |
| 4.12 | 정렬: 최신거래순 | | | |
| 4.13 | 필터 초기화 버튼 | | | 41e8929 신규 |
| 4.14 | 필터 가로스크롤 (모바일) | | | |

### 5. 시뮬레이션 & 설정

| # | 테스트 항목 | PC | 모바일 | 비고 |
|---|-----------|:--:|:-----:|------|
| 5.1 | settings 패널 열기/닫기 | | | |
| 5.2 | 소득/자금/금리 변경 → 실시간 반영 | | | |
| 5.3 | 매수 모드: LTV/DSR 슬라이더 | | | |
| 5.4 | 매수 모드: 대출한도 3병목 분석 카드 | | | LTV/DSR/월상환 병목 표시 |
| 5.5 | 전세 모드: 대출유형 전환 (정책/시중은행) | | | |
| 5.6 | 전세 모드: 월 이자 계산 | | | |
| 5.7 | 면적 표시 토글 (㎡/평) | | | |

### 6. 반응형 레이아웃

| # | 테스트 항목 | PC | 모바일 | 비고 |
|---|-----------|:--:|:-----:|------|
| 6.1 | PC (1024px+): 좌우분할 레이아웃 | | | 지도 58% + 카드 42% |
| 6.2 | 태블릿 (768~1024px): 50/50 분할 | | | |
| 6.3 | 모바일 (<768px): 단일 컬럼 | | | 지도/리스트 서브탭 |
| 6.4 | 모바일: 테이블 핵심 컬럼만 표시 | | | |
| 6.5 | 모바일: 가로 방향 회전 대응 | | | |

### 7. 데이터 & 외부 연동

| # | 테스트 항목 | PC | 모바일 | 비고 |
|---|-----------|:--:|:-----:|------|
| 7.1 | data.json 로딩 (매매 데이터) | | | |
| 7.2 | data-rent.json 로딩 (전월세 데이터) | | | |
| 7.3 | coord_cache.json 로딩 (좌표 캐시) | | | |
| 7.4 | 좌표 없는 매물 처리 (에러 없이 스킵) | | | |

### QA 진행 방법

1. **PC 먼저**: Chrome에서 https://haan6892.github.io/real-estate-monitor/ 열고 전체 체크
2. **Chrome DevTools 모바일**: F12 → Device Toolbar → iPhone 14 Pro / Galaxy S21 시뮬레이션
3. **실기기**: 가능하면 실제 모바일 브라우저에서도 확인 (DevTools와 동작이 다를 수 있음)
4. **❌ 발견 시**: 증상 + 스크린샷 메모 → Claude Code로 수정 프롬프트 작성

---

## 기술 인프라 현황

| 구성요소 | 상태 | 비고 |
|----------|:----:|------|
| GitHub Actions (배치) | ✅ | 08:00/20:00 KST 자동 실행 |
| GitHub Pages (배포) | ✅ | 정적 HTML + JSON |
| Notion DB (매물) | ✅ | ID: 30776afa2ae1805dbcf3cfede697b78d |
| Notion DB (정책) | ✅ | ID: 30776afa2ae1801e96e9dc3f5f3e58cc |
| 텔레그램 알림 | ✅ | 간결 요약 + 대시보드 링크 |
| 카카오맵 API | ✅ | REST키 재발급 완료, JS키 도메인 제한 |
| coord_cache.json | ✅ | 지오코딩 캐시, 법정동 제거 로직 적용 완료 |
| Claude Code | ✅ | v2.1.42, 코드수정/커밋/푸시 |

---

## 새 세션 시작 시 프롬프트

### QA 버그 수정
```
QA에서 발견된 버그 수정하자.

배포: https://haan6892.github.io/real-estate-monitor/

발견된 이슈:
(여기에 QA 결과 붙여넣기)

프로젝트 문서: /mnt/project/부동산_대시보드_진행상황.md
```

### 지역별 LTV 자동 적용
```
지역별 LTV 자동 적용 작업 진행하자.

현재 상태:
- 배포: https://haan6892.github.io/real-estate-monitor/
- Phase A~D 모두 완료 (카드UI, 지도통합, 반응형, 지오코딩 정비)
- 문제: settings.json LTV 70% 일괄 적용 → 투기과열지구 매물도 70%로 계산됨

상세 프롬프트: claude-code-prompt-ltv-auto.md 참고
프로젝트 문서: /mnt/project/부동산_대시보드_진행상황.md
```

### 정책 변경 감지 배치
```
정책 변경 감지 배치 구현하자.

상세 프롬프트: claude-code-prompt-policy-monitor.md 참고
프로젝트 문서: /mnt/project/부동산_대시보드_진행상황.md
```

### 파일 분리 리팩토링
```
index.html 파일 분리 리팩토링하자. 토큰 최적화 목적.

현재: index.html 단일 파일 1,500줄+
목표: index.html + style.css + app.js 3파일 분리

주의:
- GitHub Pages 정적 배포이므로 빌드 불필요
- 기존 기능 절대 깨지면 안 됨
- CSS 변수(테마), 카카오맵, 모든 이벤트 핸들러 동작 확인 필수
- 검증은 내가 수동으로 할게, 커밋/푸시까지만 해줘

프로젝트 문서: /mnt/project/부동산_대시보드_진행상황.md
```
