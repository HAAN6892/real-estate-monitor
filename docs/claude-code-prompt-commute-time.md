# Claude Code 작업 프롬프트 — 출퇴근 소요시간 표시 + KB링크 제거

레포: HAAN6892/real-estate-monitor
배포: https://haan6892.github.io/real-estate-monitor/

---

## 작업 A: KB부동산 링크 제거 (간단)

### 문제
카드 내 K(KB부동산) 링크가 `kbland.kr/map?search=단지명` 형태인데, KB부동산이 URL 파라미터 검색을 지원하지 않아서 항상 메인 지도 화면으로만 떨어짐. 의미 없는 링크.

### 수정
- 매물 카드에서 K 링크 완전 제거
- N(네이버 부동산) 링크만 남기기
- 전세 카드도 동일하게 K 제거

### 커밋 메시지
"fix: KB부동산 링크 제거 (URL 검색 미지원)"

---

## 작업 B: 출퇴근 소요시간 표시 (메인)

### 목적
매물 카드에 강남역 미림타워까지 출퇴근 소요시간을 표시하여, "1시간 이내 출퇴근 가능한 매물"을 빠르게 필터링할 수 있게 한다.

### 기준
- **목적지**: 강남역 미림타워 (서울 강남구 역삼동 826)
- **시간대**: 평일 아침 7~9시 출발
- **교통수단 2가지**:
  - 🚇 지하철만 (지하철+도보)
  - 🚌 버스 포함 (버스+지하철+도보, 가장 빠른 경로)
- **단위**: 동(洞) 단위로 대략적 소요시간 (같은 동이면 비슷하므로)

### 구현 순서

#### B-1. commute_time.json 생성

동별 출퇴근 소요시간 데이터 파일. 수동 조사 결과를 넣을 구조:

```json
{
  "destination": "강남역 미림타워",
  "address": "서울 강남구 역삼동 826",
  "survey_basis": "평일 07:00~09:00 출발 기준, 네이버지도/카카오맵 참고",
  "updated": "2026-02-18",
  "data": {
    "경기 광주시 역동": { "subway": 75, "transit": 55, "note": "경강선 이용" },
    "경기 광주시 오포읍": { "subway": 80, "transit": 60, "note": "" },
    "경기 광주시 송정동": { "subway": null, "transit": 65, "note": "지하철 직접연결 없음" },
    "경기 용인시 기흥구 구갈동": { "subway": 55, "transit": 45, "note": "분당선+신분당선" },
    "수원 장안구 정자동": { "subway": 70, "transit": 50, "note": "" }
  }
}
```

필드 설명:
- `subway`: 지하철+도보만 이용 시 소요시간(분). 지하철 직접 연결 없으면 null
- `transit`: 버스 포함 최적 경로 소요시간(분)
- `note`: 주요 노선 등 참고사항

**중요**: 이 파일의 data는 내(Hans)가 직접 조사해서 채울 예정. 지금은 구조만 만들고 빈 데이터(`"data": {}`)로 생성. 내가 나중에 데이터를 넣으면 대시보드에 자동 반영되는 구조로.

#### B-2. 대시보드에서 commute_time.json 로드

loadData() 함수에서 data.json, data-rent.json, coord_cache.json과 함께 commute_time.json도 fetch.

각 매물의 동(dong) 필드와 commute_time.json의 키를 매칭:
- data.json 매물에는 `sgg_name`(예: "경기 광주시")과 `dong`(예: "역동") 필드가 있음
- 매칭 키: `sgg_name + " " + dong` → commute_time.json의 data 키와 비교
- 매칭 안 되면 sgg_name만으로 가장 가까운 키 찾기 (같은 시/구 내 평균값 사용 가능)
- 매칭 안 되면 소요시간 표시 안 함 (빈칸)

#### B-3. 매물 카드에 소요시간 표시

카드 내 기존 정보 아래에 출퇴근 시간 표시:

```
🚇 58분  🚌 42분
```

스타일:
- 1시간(60분) 이내: 초록색 텍스트
- 60~90분: 노란색 텍스트  
- 90분 초과 또는 null: 회색 텍스트로 "-"

지하철이 null이면 (직접 연결 없음):
```
🚇 —  🚌 42분
```

데이터가 아예 없는 매물:
```
🚇 —  🚌 —
```

카드 레이아웃 예시 (기존 + 추가):
```
[매수가능] 인정프린스                    용인 기흥구
분당선 도보 88분 · 1996년 · 18.1평(60㎡) · 367세대
매 매  2억 2,500만
        대출 1억 5,750만 · 자기 6,750만 · 월 75만
🚇 55분  🚌 42분                              N
```

#### B-4. 필터 추가

필터바에 출퇴근 시간 필터 추가:

모바일 (2줄 레이아웃):
- 기존 1줄: [지역][면적][판정]
- 기존 2줄: [정렬][검색][뷰토글]
- → 1줄에 [출퇴근▼] 추가 또는 별도 체크박스

드롭다운 옵션:
- 전체 (기본)
- 🚌 1시간 이내 (버스 포함 60분 이하)
- 🚇 1시간 이내 (지하철만 60분 이하)
- 🚌 45분 이내

필터 동작: 선택된 조건에 맞는 매물만 표시. commute_time 데이터 없는 매물은 "전체"에서만 표시.

#### B-5. 정렬 옵션 추가

기존 정렬 옵션에 추가:
- 🚌 출퇴근순 (버스 포함 소요시간 오름차순)

데이터 없는 매물은 맨 뒤로.

### 파일 변경 목록

| 파일 | 변경 |
|------|------|
| commute_time.json | 신규 생성 (빈 data로) |
| index.html | loadData()에 commute_time.json fetch 추가, 카드 렌더링에 소요시간 표시, 필터/정렬 옵션 추가 |

### 검증

1. commute_time.json이 빈 data일 때: 카드에 "🚇 — 🚌 —" 표시, 필터/정렬은 동작하되 데이터 없는 건은 맨 뒤
2. 테스트 데이터 2~3개 넣었을 때: 해당 매물 카드에 시간 표시되는지
3. 필터 "🚌 1시간 이내" 선택 시: transit ≤ 60인 매물만 표시
4. 기존 기능 깨지지 않는지 (카드, 지도, 필터 전부)

### 테스트용 샘플 데이터

commute_time.json에 아래 3건만 넣어서 테스트:

```json
{
  "destination": "강남역 미림타워",
  "address": "서울 강남구 역삼동 826",
  "survey_basis": "평일 07:00~09:00 출발 기준",
  "updated": "2026-02-18",
  "data": {
    "경기 광주시 역동": { "subway": 75, "transit": 55, "note": "경강선→신분당선 환승" },
    "경기 용인시 기흥구 구갈동": { "subway": 55, "transit": 42, "note": "분당선→신분당선" },
    "수원 장안구 정자동": { "subway": 70, "transit": 48, "note": "1호선→신분당선 환승" }
  }
}
```

→ 이 3개 동에 해당하는 매물 카드에 시간이 표시되면 성공.
→ 나머지 매물은 "🚇 — 🚌 —"으로 표시.
→ 내가 나중에 나머지 동 데이터를 직접 채워넣을 예정.

### 커밋 메시지
"feat: 출퇴근 소요시간 표시 (commute_time.json + 카드 표시 + 필터)"

---

## 작업 순서

```
작업 A (KB링크 제거) → 커밋
작업 B (출퇴근 소요시간) → 커밋
푸시
```
