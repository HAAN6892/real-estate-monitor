# Claude Code 작업 프롬프트 — 지도 전체화면 토글 + 좌표 수정

## 작업 1: 지도 전체화면 토글 버튼

### 배경
현재 매물 시뮬레이션 탭에서 지도(58%) + 카드 리스트(42%) 좌우 분할 구조.
PC에서 지도를 크게 보고 싶다는 요구. 모바일도 깨지면 안 됨.

### 구현

**전체화면 토글 버튼 추가:**
- 지도 영역 우상단(또는 좌상단)에 🗺️ 확대/축소 토글 버튼
- 클릭 시: 지도 100% 너비, 카드 리스트 숨김
- 다시 클릭: 원래 58/42 분할로 복귀
- 버튼 텍스트: "⛶" 또는 "🗺️ 전체" ↔ "◧ 분할" 같은 직관적 표시

**PC (1024px+):**
- 기본: 현재 58/42 분할 유지
- 전체화면 모드: 지도 width 100%, 카드 리스트 display:none
- 지도 resize 이벤트 처리 (카카오맵 relayout 호출 필수)

**모바일 (<768px):**
- 현재 이미 지도/리스트 서브탭 전환 구조 → 전체화면 버튼 불필요
- 모바일에서는 전체화면 버튼 숨김 (display:none)

**태블릿 (768~1024px):**
- PC와 동일하게 토글 가능

### 주의사항
- 전체화면 전환 시 `map.relayout()` 호출해야 지도가 제대로 리사이즈됨
- 전체화면 상태에서도 지도 핀 클릭 → 팝업은 정상 동작해야 함
- 전체화면에서 카드 리스트가 숨겨져도, 필터 변경 시 핀은 계속 동기화
- 분할로 돌아올 때도 `map.relayout()` 호출
- CSS transition으로 부드럽게 전환하면 좋음

### 구현 힌트

```javascript
// 전체화면 토글
let mapFullscreen = false;

function toggleMapFullscreen() {
  mapFullscreen = !mapFullscreen;
  const container = document.querySelector('.split-container'); // 또는 해당 wrapper
  const cardPanel = document.querySelector('.card-panel'); // 카드 리스트 영역
  const mapPanel = document.querySelector('.map-panel'); // 지도 영역
  
  if (mapFullscreen) {
    cardPanel.style.display = 'none';
    mapPanel.style.width = '100%';
  } else {
    cardPanel.style.display = '';
    mapPanel.style.width = '';
  }
  
  // 카카오맵 리사이즈 필수
  setTimeout(() => { if (map) map.relayout(); }, 100);
}
```

---

## 작업 2: 건영2 (서울 관악구 신림동) 좌표 수정

### 문제
건영2차 아파트(서울 관악구 신림동)의 지도 핀이 금천구/시흥대로 쪽에 잘못 표시됨.
data.json에서 lat/lon이 null인데, coord_cache.json에서 잘못된 좌표가 매칭된 것으로 추정.

### 수정 방법

1. coord_cache.json에서 "건영2" 관련 키를 검색
2. 잘못된 좌표 확인 후 삭제
3. 배치 재실행 시 카카오 API가 올바른 좌표를 다시 가져오도록 함

또는 수동으로 정확한 좌표 입력:
- 건영2차 아파트 주소: 서울 관악구 신림동 1703
- 정확한 좌표: 약 lat 37.4745, lon 126.9285 (신림역 남서쪽)
  → 카카오맵에서 "관악구 신림동 건영2차 아파트" 검색하여 정확한 좌표 확인 후 입력

### 작업 순서
1. `coord_cache.json`에서 건영2 관련 항목 찾기: `grep "건영2" coord_cache.json`
2. 해당 항목 삭제 또는 올바른 좌표로 교체
3. `data.json`에서 건영2의 lat/lon이 null이면 그대로 두기 (index.html이 coord_cache에서 매칭)
4. 대시보드에서 핀 위치 확인

---

## 작업 3: 필터 버튼 텍스트 가독성 수정

### 문제
전세 모드(초록 테마)에서 필터 드롭다운에 값을 선택하면 버튼 텍스트가 배경색에 묻혀서 안 보임.
예: 면적 필터 "중형", 판정 필터 "가능" 등 선택 시 글씨가 배경과 같은 계열 색이라 식별 불가.
매수 모드(파란 테마)에서도 비슷한 문제 있을 수 있음.

### 수정 방향
- 필터 버튼(드롭다운 select)의 **선택된 상태 텍스트 색상**을 항상 고대비로 유지
- 활성 필터: 밝은 배경 + 어두운 텍스트 (또는 반대) → 어떤 테마에서든 잘 보이도록
- 구체적으로: 필터가 "전체"가 아닌 값으로 선택되었을 때 버튼에 하이라이트 스타일 적용
  - 예: 흰색 배경 + 어두운 텍스트 + 테마 색상 보더
  - 또는: 진한 배경 + 흰색 텍스트
- 양쪽 모드(매수 파랑 / 전세 초록) 모두에서 테스트

### 참고
현재 CSS 변수 기반 테마 시스템 사용 중 (--accent, --bg 등).
필터 select 요소의 color/background-color가 테마 변수와 충돌하는 것이 원인일 가능성 높음.

---

## 작업 3: 필터 텍스트 가독성 + 초기화 버튼

### 문제 1: 필터 선택 시 글씨 안 보임
전세 모드(초록 테마)에서 필터 드롭다운에 값 선택하면 버튼 텍스트가 배경색에 묻혀서 안 보임.
스크린샷 참고: 면적 필터, 유형 필터, 판정 필터 모두 선택된 상태인데 글씨가 거의 안 보임.
매수 모드(파란 테마)에서도 동일 문제 있을 수 있음.

**수정:**
- 필터가 "전체"가 아닌 값으로 선택되었을 때 → 고대비 하이라이트 스타일 적용
- 예: 흰색 배경 + 어두운 텍스트 + 테마 색상 보더 (어떤 테마에서든 잘 보이도록)
- "전체" 상태일 때는 기존 스타일 유지
- 양쪽 모드(매수 파랑 / 전세 초록) 모두에서 테스트

### 문제 2: 필터 한번에 초기화 버튼 없음
필터 여러 개 걸었을 때 하나하나 풀어야 해서 불편함.

**수정:**
- 필터 영역 끝(검색 옆 또는 뒤)에 "↺ 초기화" 버튼 추가
- 클릭 시: 지역/면적/유형/판정 필터 모두 "전체"로, 검색어 비우기, 정렬 기본값으로 리셋
- 필터가 하나라도 걸려있을 때만 버튼 표시 (또는 항상 표시해도 OK)
- 초기화 후 update() 호출하여 리스트/지도 갱신

---

## 커밋
- 작업 1: "feat: 지도 전체화면 토글 버튼 (PC/태블릿)"
- 작업 2: "fix: 건영2 (관악구 신림동) 좌표 수정"
- 작업 3: "fix: 필터 텍스트 가독성 + 초기화 버튼"

두 작업 커밋 분리해서 진행.

## 참고 문서
- /mnt/project/부동산_대시보드_진행상황.md
